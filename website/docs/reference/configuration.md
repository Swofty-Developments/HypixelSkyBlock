# Configuration Reference

This page documents all configuration files and their options.

## resources.json

The main configuration file shared by all servers and services.

**Location**: `configuration/resources.json`

```json
{
  "velocity-secret": "your-forwarding-secret-here",
  "mongodb-uri": "mongodb://localhost:27017",
  "redis-uri": "redis://localhost:6379",
  "resource-pack-url": "https://example.com/pack.zip",
  "resource-pack-hash": "sha1-hash-of-pack"
}
```

### Fields

| Field | Required | Description |
|-------|----------|-------------|
| `velocity-secret` | Yes | Must match `forwarding.secret` from Velocity |
| `mongodb-uri` | Yes | MongoDB connection string |
| `redis-uri` | Yes | Redis connection string |
| `resource-pack-url` | No | URL to download resource pack |
| `resource-pack-hash` | No | SHA1 hash for pack verification |

### Docker Configuration

For Docker deployments, use `resources.json.docker`:

```json
{
  "velocity-secret": "docker-secret",
  "mongodb-uri": "mongodb://mongodb:27017",
  "redis-uri": "redis://redis:6379"
}
```

Note the hostnames `mongodb` and `redis` match Docker service names.

## velocity.toml

Velocity proxy configuration.

**Location**: `velocity.toml` (proxy directory)

### Key Settings

```toml
# Bind address
bind = "0.0.0.0:25565"

# Online mode (true = premium only, false = cracked)
online-mode = true

# Player forwarding mode (must be "modern")
player-info-forwarding-mode = "modern"

# Max players
show-max-players = 500

# MOTD
motd = "<green>HypixelSkyBlock</green>"
```

### Server Registration

Servers register dynamically via Redis, so you don't need to manually configure server entries.

## NanoLimbo settings.yml

Configuration for the limbo server.

**Location**: `settings.yml` (NanoLimbo directory)

### Key Settings

```yaml
# Bind settings
bind:
  host: "0.0.0.0"
  port: 25566

# Velocity forwarding
forwarding:
  type: MODERN
  secret: "your-velocity-secret"
```

:::alert warning
The `secret` must match your Velocity forwarding secret exactly.
:::

## Directory Structure

### Proxy Directory
```
proxy/
├── velocity-3.4.0-SNAPSHOT-528.jar
├── velocity.toml
├── forwarding.secret          # Generated by Velocity
├── configuration/
│   └── resources.json
└── plugins/
    └── SkyBlockProxy.jar
```

### Game Server Directory
```
gameserver/
├── HypixelCore.jar
└── configuration/
    ├── resources.json
    ├── hypixel_prototype_lobby/
    └── skyblock/
        ├── islands/
        │   ├── hypixel_skyblock_hub/
        │   └── hypixel_skyblock_island_template/
        ├── items/
        ├── collection/
        └── songs/
```

### Service Directory
```
services/
├── ServiceAPI.jar
├── ServiceAuctionHouse.jar
├── ServiceBazaar.jar
├── ...
└── configuration/
    └── resources.json
```

## Environment Variables

Some settings can be overridden via environment variables:

| Variable | Description |
|----------|-------------|
| `MONGODB_URI` | Override MongoDB connection |
| `REDIS_URI` | Override Redis connection |
| `API_PORT` | Override API service port |

## Database Collections

MongoDB collections created automatically:

| Collection | Purpose |
|------------|---------|
| `profiles` | Player profiles and data |
| `users` | User accounts |
| `auction_active` | Active auctions |
| `auction_inactive` | Completed auctions |
| `orders` | Bazaar orders |
| `tracked_items` | Item tracking |
| `regions` | World regions |
| `fairysouls` | Fairy soul locations |
| `crystals` | Hub crystal locations |
